

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Future Work &mdash; Retinal Disease Classification Based on OCT Images  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Conclusion" href="../conclusion/index.html" />
    <link rel="prev" title="Reporting Prediction Results" href="../plot/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Retinal Disease Classification Based on OCT Images
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/index.html">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../train/index.html">Training The Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test/index.html">Testing The Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plot/index.html">Reporting Prediction Results</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Future Work</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#automated-cluster-run">Automated Cluster Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cookiecutter">Cookiecutter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../conclusion/index.html">Conclusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">final_project</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Retinal Disease Classification Based on OCT Images</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Future Work</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/future/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="future-work">
<h1>Future Work<a class="headerlink" href="#future-work" title="Permalink to this headline">¶</a></h1>
<div class="section" id="automated-cluster-run">
<h2>Automated Cluster Run<a class="headerlink" href="#automated-cluster-run" title="Permalink to this headline">¶</a></h2>
<p>As described before, Luigi ExternalProgramTask can be used to trigger SSH connection. So instead of manually building
the model on remote cluster, we can use Python subprocess to send several commands that includes resource allocation
request, activating environments and running the convolutional neural network package. An example of using subprocess
is shown below where the subprocess runs a command, waits until it is finished and then execute the second command and
so on</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">cmd_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;srun --partition=gpu --nodes=1 --cpus-per-task 4 --export=ALL --gres=gpu:v100-sxm2:1 --mem=2Gb --time=02:00:00 --pty /bin/bash&#39;</span><span class="p">,</span> <span class="s1">&#39;python -m CNN -d &quot;data/OCTReduced&quot; -o &quot;data/ConvNeuralTrain/retinal_cnn.h5&quot; -a &quot;train&quot; -l &quot;data/ConvNeuralTrain/retinal_cnn.h5&quot;&#39;</span><span class="p">]</span>

<span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">err</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">cmd_list</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">cmd</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="nb">print</span> <span class="s1">&#39;args=&#39;</span><span class="p">,</span><span class="n">args</span>
    <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">args</span><span class="p">,</span>
        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
    <span class="p">(</span><span class="n">stdoutdata</span><span class="p">,</span> <span class="n">stderrdata</span><span class="p">)</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stdoutdata</span><span class="p">)</span>
    <span class="n">err</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stderrdata</span><span class="p">)</span>

<span class="nb">print</span> <span class="s1">&#39;out=&#39;</span><span class="p">,</span><span class="n">out</span>
<span class="nb">print</span> <span class="s1">&#39;err=&#39;</span><span class="p">,</span><span class="n">err</span>
</pre></div>
</div>
<p>This feature is already under development.</p>
</div>
<div class="section" id="cookiecutter">
<h2>Cookiecutter<a class="headerlink" href="#cookiecutter" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/cookie.png" src="../_images/cookie.png" />
<p>This problem of runnig a compute-intensive part of the code on a cluster computer is very generic and applies to many
problems esp. in the field of machine learning. So this is a very good candidate of a cookiecutter template.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../conclusion/index.html" class="btn btn-neutral float-right" title="Conclusion" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../plot/index.html" class="btn btn-neutral float-left" title="Reporting Prediction Results" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Arash Sarmadi.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>